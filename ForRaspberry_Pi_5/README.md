1. config.py:
Це файл конфігурації, що містить всі ключові регістри для зчитування даних з інвертора. Він включає:
current_inv_data: Основні поточні параметри (напруга, струм, потужність).
inverters_errors: Перелік регістрів для помилок інвертора.
inverters_accumulated_data: Накопичені енергетичні дані (купівля-продаж енергії).
inverters_base_config: Базова конфігурація інвертора.
inverters_param_states: Стани інвертора та релевантні параметри (статус, реле тощо).
2. RS485Client.py:
Відповідає за зв'язок з інвертором через інтерфейс RS485.
Функція send_request виконує Modbus-запит до регістра за вказаною адресою та повертає результат.
get_inverters_data_accept_errors: Основна функція для зчитування даних (поточні дані, накопичені дані, стани інвертора) і збереження їх у словниках.
get_inverter_errors та get_inverter_param_states обробляють специфічні типи даних (помилки і стани).
3. data_collector.py:
Клас DataCollector зберігає і обробляє отримані дані з інвертора.
collect_curren_inverter_data: Збирає поточні дані за допомогою RS485Client і зберігає їх у словнику current_inv_data.
avg_data: Обчислює середні значення по зібраних даних.
4. data_sender.py:
Цей файл відповідає за відправку даних на Django сервер.
Клас DataSender зчитує зібрані дані з DataCollector та відправляє їх на сервер за допомогою HTTP-запитів через бібліотеку requests.
Логіка відправки виконується у фоновому потоці, що забезпечує безперервну роботу.
5. data_logger.py:
Налаштовує логування подій в систему через логгер.
Використовуються два логфайли: inverter.log для загальних подій та requests.log для запису відповідей від сервера.